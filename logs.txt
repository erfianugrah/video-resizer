GET https://cdn.erfi.dev/erfi.mp4?imwidth=800 - Ok @ 4/24/2025, 12:43:05 PM
  (debug) RequestContext: Loaded debug config { enabled: false, verbose: false }
  (debug) RequestContext: getCurrentContext called but no context is set {}
  (debug) RequestContext: Loaded debug config { enabled: false, verbose: false }
  (debug) RequestContext: Set current request context {
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  url: 'https://cdn.erfi.dev/erfi.mp4?imwidth=800',
  timestamp: '2025-04-24T10:43:05.296Z'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'Initializing environment configuration',
  elapsedMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'Environment determined',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'Environment configuration parsing',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'No PATH_PATTERNS configuration provided',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'Environment configuration completed',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'Initializing environment configuration',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'Environment determined',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'Environment configuration parsing',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'No PATH_PATTERNS configuration provided',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'Environment configuration completed',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Updated breadcrumb config { enabled: true, maxItems: 100 }
  (debug) RequestContext: Loaded breadcrumb config asynchronously { enabled: true, maxItems: 100 }
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigurationManager',
  message: 'Duration settings being updated',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385296,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  hasNewDefaultDuration: false,
  oldDefaultDuration: null,
  newDefaultDuration: null,
  derivativeChanges: {},
  elapsedMs: 0,
  category: 'VideoConfigurationManager',
  breadcrumb: {
    timestamp: 1745491385296,
    category: 'VideoConfigurationManager',
    message: 'Duration settings being updated',
    data: {
      hasNewDefaultDuration: false,
      oldDefaultDuration: null,
      newDefaultDuration: null,
      derivativeChanges: {}
    },
    elapsedMs: 0,
    durationMs: 0
  },
  breadcrumbsCount: 11,
  msg: 'Duration settings being updated'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigurationManager',
  message: 'Updated configuration duration settings',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385296,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  defaultDuration: null,
  mobileDerivativeDuration: 'not set',
  desktopDerivativeDuration: 'not set',
  elapsedMs: 0,
  category: 'VideoConfigurationManager',
  breadcrumb: {
    timestamp: 1745491385296,
    category: 'VideoConfigurationManager',
    message: 'Updated configuration duration settings',
    data: {
      defaultDuration: null,
      mobileDerivativeDuration: 'not set',
      desktopDerivativeDuration: 'not set'
    },
    elapsedMs: 0,
    durationMs: 0
  },
  breadcrumbsCount: 12,
  msg: 'Updated configuration duration settings'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Applying base configuration',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Fast initialization complete',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Worker',
  message: 'Attempting to load configuration from KV',
  elapsedMs: '0.00'
}
  (info) {
  time: 1745491385296,
  level: 30,
  requestId: '808814a4-1a76-4161-9aed-4093e2b4311b',
  elapsedMs: 0,
  category: 'Worker',
  breadcrumb: {
    timestamp: 1745491385296,
    category: 'Worker',
    message: 'Attempting to load configuration from KV',
    elapsedMs: 0
  },
  breadcrumbsCount: 1,
  msg: 'Attempting to load configuration from KV'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Starting configuration load process',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Fetching configuration from KV with caching',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'Initializing environment configuration',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'Environment determined',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'Environment configuration parsing',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'No PATH_PATTERNS configuration provided',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'EnvironmentConfig',
  message: 'Environment configuration completed',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Base configuration applied',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Video configuration initialized with defaults',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'No duration limit found in default config',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigurationManager',
  message: 'Duration settings being updated',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385296,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  hasNewDefaultDuration: false,
  oldDefaultDuration: null,
  newDefaultDuration: null,
  derivativeChanges: {},
  elapsedMs: 0,
  category: 'VideoConfigurationManager',
  breadcrumb: {
    timestamp: 1745491385296,
    category: 'VideoConfigurationManager',
    message: 'Duration settings being updated',
    data: {
      hasNewDefaultDuration: false,
      oldDefaultDuration: null,
      newDefaultDuration: null,
      derivativeChanges: {}
    },
    elapsedMs: 0,
    durationMs: 0
  },
  breadcrumbsCount: 25,
  msg: 'Duration settings being updated'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigurationManager',
  message: 'Updated configuration duration settings',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385296,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  defaultDuration: null,
  mobileDerivativeDuration: 'not set',
  desktopDerivativeDuration: 'not set',
  elapsedMs: 0,
  category: 'VideoConfigurationManager',
  breadcrumb: {
    timestamp: 1745491385296,
    category: 'VideoConfigurationManager',
    message: 'Updated configuration duration settings',
    data: {
      defaultDuration: null,
      mobileDerivativeDuration: 'not set',
      desktopDerivativeDuration: 'not set'
    },
    elapsedMs: 0,
    durationMs: 0
  },
  breadcrumbsCount: 26,
  msg: 'Updated configuration duration settings'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Starting background KV configuration update',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'KV fetch operation completed',
  elapsedMs: '2.00',
  durationMs: '2.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Cached KV data in memory',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Successfully loaded configuration from KV',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Setting duration limits from config',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Derivative desktop duration',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Derivative tablet duration',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Derivative mobile duration',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationUtils',
  message: 'Discovered new duration limit',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationUtils',
  message: 'Discovered new duration limit',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Configuration distributed to all managers',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigManager',
  message: 'Updating from KV configuration',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  hasDerivatives: true,
  pathPatternCount: 4,
  hasDurationSettings: true,
  elapsedMs: 2,
  category: 'VideoConfigManager',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'VideoConfigManager',
    message: 'Updating from KV configuration',
    data: {
      hasDerivatives: true,
      pathPatternCount: 4,
      hasDurationSettings: true
    },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 38,
  msg: 'Updating from KV configuration'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigurationManager',
  message: 'Duration settings being updated',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  hasNewDefaultDuration: true,
  oldDefaultDuration: null,
  newDefaultDuration: '5m',
  derivativeChanges: {
    desktop: { old: null, new: '5m' },
    tablet: { old: null, new: '5m' },
    mobile: { old: null, new: '5m' }
  },
  elapsedMs: 2,
  category: 'VideoConfigurationManager',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'VideoConfigurationManager',
    message: 'Duration settings being updated',
    data: {
      hasNewDefaultDuration: true,
      oldDefaultDuration: null,
      newDefaultDuration: '5m',
      derivativeChanges: [Object]
    },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 39,
  msg: 'Duration settings being updated'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigurationManager',
  message: 'Updated configuration duration settings',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  defaultDuration: '5m',
  mobileDerivativeDuration: '5m',
  desktopDerivativeDuration: '5m',
  elapsedMs: 2,
  category: 'VideoConfigurationManager',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'VideoConfigurationManager',
    message: 'Updated configuration duration settings',
    data: {
      defaultDuration: '5m',
      mobileDerivativeDuration: '5m',
      desktopDerivativeDuration: '5m'
    },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 40,
  msg: 'Updated configuration duration settings'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigurationManager',
  message: 'Updated path patterns',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  patternCount: 4,
  patterns: 'videos, popular, shorts, standard',
  elapsedMs: 2,
  category: 'VideoConfigurationManager',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'VideoConfigurationManager',
    message: 'Updated path patterns',
    data: { patternCount: 4, patterns: 'videos, popular, shorts, standard' },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 41,
  msg: 'Updated path patterns'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Duration limits already set, not overwriting from config',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Worker',
  message: 'Successfully loaded configuration from KV',
  elapsedMs: '2.00',
  durationMs: '2.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '808814a4-1a76-4161-9aed-4093e2b4311b',
  version: '1.0.0',
  lastUpdated: '2025-04-23T10:37:13.633Z',
  elapsedMs: 2,
  category: 'Worker',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Worker',
    message: 'Successfully loaded configuration from KV',
    data: { version: '1.0.0', lastUpdated: '2025-04-23T10:37:13.633Z' },
    elapsedMs: 2,
    durationMs: 2
  },
  durationMs: 2,
  breadcrumbsCount: 2,
  msg: 'Successfully loaded configuration from KV'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Worker',
  message: 'About to apply KV configuration',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '808814a4-1a76-4161-9aed-4093e2b4311b',
  hasVideoConfig: true,
  hasCacheConfig: true,
  hasDebugConfig: true,
  hasLoggingConfig: true,
  hasPassthrough: true,
  passthroughEnabled: true,
  version: '1.0.0',
  lastUpdated: '2025-04-23T10:37:13.633Z',
  elapsedMs: 2,
  category: 'Worker',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Worker',
    message: 'About to apply KV configuration',
    data: {
      hasVideoConfig: true,
      hasCacheConfig: true,
      hasDebugConfig: true,
      hasLoggingConfig: true,
      hasPassthrough: true,
      passthroughEnabled: true,
      version: '1.0.0',
      lastUpdated: '2025-04-23T10:37:13.633Z'
    },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 3,
  msg: 'About to apply KV configuration'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Configuration',
  message: 'Applying KV configuration',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Config',
  message: 'Processing KV configuration update',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  hasVideoConfig: true,
  hasCacheConfig: true,
  hasLoggingConfig: true,
  hasDebugConfig: true,
  hasStorageConfig: true,
  configVersion: '1.0.0',
  lastUpdated: '2025-04-23T10:37:13.633Z',
  elapsedMs: 2,
  category: 'Config',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Config',
    message: 'Processing KV configuration update',
    data: {
      hasVideoConfig: true,
      hasCacheConfig: true,
      hasLoggingConfig: true,
      hasDebugConfig: true,
      hasStorageConfig: true,
      configVersion: '1.0.0',
      lastUpdated: '2025-04-23T10:37:13.633Z'
    },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 43,
  msg: 'Processing KV configuration update'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Config',
  message: 'Processing video configuration from KV',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  hasPassthrough: true,
  passthroughEnabled: true,
  hasDerivatives: true,
  hasCdnCgi: true,
  hasPathPatterns: 4,
  defaultDuration: '5m',
  elapsedMs: 2,
  category: 'Config',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Config',
    message: 'Processing video configuration from KV',
    data: {
      hasPassthrough: true,
      passthroughEnabled: true,
      hasDerivatives: true,
      hasCdnCgi: true,
      hasPathPatterns: 4,
      defaultDuration: '5m'
    },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 44,
  msg: 'Processing video configuration from KV'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Config',
  message: 'Derivative durations from KV',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  derivatives: [ 'desktop', 'tablet', 'mobile' ],
  durations: { desktop: '5m', tablet: '5m', mobile: '5m' },
  elapsedMs: 2,
  category: 'Config',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Config',
    message: 'Derivative durations from KV',
    data: { derivatives: [Array], durations: [Object] },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 45,
  msg: 'Derivative durations from KV'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Config',
  message: 'Updated video configuration from KV',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  hasPassthrough: true,
  passthroughEnabled: true,
  whitelistedFormats: 3,
  defaultDuration: '5m',
  hasDerivatives: true,
  derivativeCount: 3,
  elapsedMs: 2,
  category: 'Config',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Config',
    message: 'Updated video configuration from KV',
    data: {
      hasPassthrough: true,
      passthroughEnabled: true,
      whitelistedFormats: 3,
      defaultDuration: '5m',
      hasDerivatives: true,
      derivativeCount: 3
    },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 46,
  msg: 'Updated video configuration from KV'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Config',
  message: 'Processing cache configuration from KV',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  method: 'cacheApi',
  debug: false,
  hasFallback: true,
  profileCount: 5,
  hasMimeTypes: true,
  elapsedMs: 2,
  category: 'Config',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Config',
    message: 'Processing cache configuration from KV',
    data: {
      method: 'cacheApi',
      debug: false,
      hasFallback: true,
      profileCount: 5,
      hasMimeTypes: true
    },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 47,
  msg: 'Processing cache configuration from KV'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Config',
  message: 'Updated cache configuration from KV',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  elapsedMs: 2,
  category: 'Config',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Config',
    message: 'Updated cache configuration from KV',
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 48,
  msg: 'Updated cache configuration from KV'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Config',
  message: 'Updated logging configuration from KV',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 'debug',
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  format: 'json',
  elapsedMs: 2,
  category: 'Config',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Config',
    message: 'Updated logging configuration from KV',
    data: { level: 'debug', format: 'json' },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 49,
  msg: 'Updated logging configuration from KV'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Config',
  message: 'Updated debug configuration from KV',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  enabled: true,
  verbose: false,
  elapsedMs: 2,
  category: 'Config',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Config',
    message: 'Updated debug configuration from KV',
    data: { enabled: true, verbose: false },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 50,
  msg: 'Updated debug configuration from KV'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Config',
  message: 'Completed KV configuration update',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  hasVideoConfig: true,
  hasCacheConfig: true,
  hasLoggingConfig: true,
  hasDebugConfig: true,
  elapsedMs: 2,
  category: 'Config',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Config',
    message: 'Completed KV configuration update',
    data: {
      hasVideoConfig: true,
      hasCacheConfig: true,
      hasLoggingConfig: true,
      hasDebugConfig: true
    },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 51,
  msg: 'Completed KV configuration update'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigurationManager',
  message: 'Duration settings being updated',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  hasNewDefaultDuration: true,
  oldDefaultDuration: '5m',
  newDefaultDuration: '5m',
  derivativeChanges: {},
  elapsedMs: 2,
  category: 'VideoConfigurationManager',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'VideoConfigurationManager',
    message: 'Duration settings being updated',
    data: {
      hasNewDefaultDuration: true,
      oldDefaultDuration: '5m',
      newDefaultDuration: '5m',
      derivativeChanges: {}
    },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 52,
  msg: 'Duration settings being updated'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigurationManager',
  message: 'Updated configuration duration settings',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  defaultDuration: '5m',
  mobileDerivativeDuration: '5m',
  desktopDerivativeDuration: '5m',
  elapsedMs: 2,
  category: 'VideoConfigurationManager',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'VideoConfigurationManager',
    message: 'Updated configuration duration settings',
    data: {
      defaultDuration: '5m',
      mobileDerivativeDuration: '5m',
      desktopDerivativeDuration: '5m'
    },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 53,
  msg: 'Updated configuration duration settings'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigurationManager',
  message: 'Updated path patterns',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '301beedb-ad22-4f86-94f3-fc965a335960',
  patternCount: 4,
  patterns: 'videos, popular, shorts, standard',
  elapsedMs: 2,
  category: 'VideoConfigurationManager',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'VideoConfigurationManager',
    message: 'Updated path patterns',
    data: { patternCount: 4, patterns: 'videos, popular, shorts, standard' },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 54,
  msg: 'Updated path patterns'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Worker',
  message: 'Path patterns after loading from KV',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '808814a4-1a76-4161-9aed-4093e2b4311b',
  patternCount: 4,
  patterns: [
    { name: 'videos', matcher: '^/videos/', processPath: true },
    {
      name: 'popular',
      matcher: '^/popular/(.*\\.mp4)',
      processPath: true
    },
    {
      name: 'shorts',
      matcher: '^/shorts/(.*\\.mp4)',
      processPath: true
    },
    {
      name: 'standard',
      matcher: '^/(.*\\.(mp4|webm|mov|avi|mkv|flv|wmv|m4v|3gp|ogv))',
      processPath: true
    }
  ],
  elapsedMs: 2,
  category: 'Worker',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Worker',
    message: 'Path patterns after loading from KV',
    data: { patternCount: 4, patterns: [Array] },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 5,
  msg: 'Path patterns after loading from KV'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Configuration',
  message: 'Loaded path patterns from KV',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Worker',
  message: 'Applied KV configuration to all config managers',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '808814a4-1a76-4161-9aed-4093e2b4311b',
  elapsedMs: 2,
  category: 'Worker',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Worker',
    message: 'Applied KV configuration to all config managers',
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 7,
  msg: 'Applied KV configuration to all config managers'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Worker',
  message: 'Initialized configuration from environment',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '808814a4-1a76-4161-9aed-4093e2b4311b',
  breadcrumbsEnabled: true,
  maxItems: 100,
  elapsedMs: 2,
  category: 'Worker',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Worker',
    message: 'Initialized configuration from environment',
    data: { breadcrumbsEnabled: true, maxItems: 100 },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 8,
  msg: 'Initialized configuration from environment'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Worker',
  message: 'Initialized video-resizer v1.0.0 in production mode with cacheApi caching method',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '808814a4-1a76-4161-9aed-4093e2b4311b',
  loggingLevel: 'debug',
  breadcrumbsEnabled: true,
  maxBreadcrumbs: 25,
  elapsedMs: 2,
  category: 'Worker',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Worker',
    message: 'Initialized video-resizer v1.0.0 in production mode with cacheApi caching method',
    data: {
      loggingLevel: 'debug',
      breadcrumbsEnabled: true,
      maxBreadcrumbs: 25
    },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 9,
  msg: 'Initialized video-resizer v1.0.0 in production mode with cacheApi caching method'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Worker',
  message: 'Incoming request',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: '808814a4-1a76-4161-9aed-4093e2b4311b',
  method: 'GET',
  url: 'https://cdn.erfi.dev/erfi.mp4?imwidth=800',
  pathname: '/erfi.mp4',
  search: '?imwidth=800',
  elapsedMs: 2,
  category: 'Worker',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'Worker',
    message: 'Incoming request',
    data: {
      method: 'GET',
      url: 'https://cdn.erfi.dev/erfi.mp4?imwidth=800',
      pathname: '/erfi.mp4',
      search: '?imwidth=800'
    },
    elapsedMs: 2,
    durationMs: 0
  },
  breadcrumbsCount: 10,
  msg: 'Incoming request'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Worker',
  message: 'Checking file extension for passthrough',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Passthrough',
  message: 'Detected file extension',
  elapsedMs: '2.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Loaded debug config { enabled: true, verbose: false }
  (debug) RequestContext: Set current request context {
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  url: 'https://cdn.erfi.dev/erfi.mp4?imwidth=800',
  timestamp: '2025-04-24T10:43:05.298Z'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoHandler',
  message: 'Environment variables received',
  elapsedMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Request',
  message: 'Started total-request-processing',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Request',
  message: 'Started total-request-processing',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Request',
  message: 'Request received',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Checking cache',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Started cache-lookup',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'KVCache',
  message: 'Started kv-cache-lookup',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Started cf-cache-lookup',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'IMQuery',
  message: 'Matched width to breakpoint',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  width: 800,
  breakpoint: 'small',
  derivative: 'mobile',
  min: 'none',
  max: 854,
  elapsedMs: 0,
  category: 'IMQuery',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'IMQuery',
    message: 'Matched width to breakpoint',
    data: {
      width: 800,
      breakpoint: 'small',
      derivative: 'mobile',
      min: 'none',
      max: 854
    },
    elapsedMs: 0,
    durationMs: 0
  },
  breadcrumbsCount: 9,
  msg: 'Matched width to breakpoint'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'IMQuery',
  message: 'Applied derivative configuration for caching',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Client',
  message: 'Matched IMQuery dimensions to derivative',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'IMQuery',
  message: 'Applied derivative based on IMQuery dimensions',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  requestedWidth: 800,
  requestedHeight: null,
  derivative: 'mobile',
  appliedWidth: 854,
  appliedHeight: 640,
  mappingMethod: 'breakpoint',
  source: 'imquery-derivative',
  elapsedMs: 0,
  category: 'IMQuery',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'IMQuery',
    message: 'Applied derivative based on IMQuery dimensions',
    data: {
      requestedWidth: 800,
      requestedHeight: null,
      derivative: 'mobile',
      appliedWidth: 854,
      appliedHeight: 640,
      mappingMethod: 'breakpoint',
      source: 'imquery-derivative'
    },
    elapsedMs: 0,
    durationMs: 0
  },
  breadcrumbsCount: 12,
  msg: 'Applied derivative based on IMQuery dimensions'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'IMQuery',
  message: 'Converted IMQuery to client hints',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'IMQuery',
  message: 'Enhanced request with IMQuery client hints',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385298,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  addedHeaders: { Width: '800' },
  elapsedMs: 0,
  category: 'IMQuery',
  breadcrumb: {
    timestamp: 1745491385298,
    category: 'IMQuery',
    message: 'Enhanced request with IMQuery client hints',
    data: { addedHeaders: [Object] },
    elapsedMs: 0,
    durationMs: 0
  },
  breadcrumbsCount: 14,
  msg: 'Enhanced request with IMQuery client hints'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Client',
  message: 'Converted IMQuery to client hints',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Client',
  message: 'Using explicit dimensions',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'KVCacheUtils',
  message: 'Skipping KV cache (disabled by configuration)',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Checking CF cache',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CacheRetrievalUtils',
  message: 'Attempting Cache API match using ORIGINAL request',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CacheRetrievalUtils',
  message: 'Attempting parallel cache matches with multiple key strategies',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'KVCache',
  message: 'Completed kv-cache-lookup',
  elapsedMs: '0.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'KV fetch operation completed',
  elapsedMs: '1.00',
  durationMs: '1.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Cached KV data in memory',
  elapsedMs: '1.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Configuration distributed to all managers',
  elapsedMs: '1.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Successfully updated configuration from KV',
  elapsedMs: '1.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigManager',
  message: 'Updating from KV configuration',
  elapsedMs: '1.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385299,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  hasDerivatives: true,
  pathPatternCount: 4,
  hasDurationSettings: true,
  elapsedMs: 1,
  category: 'VideoConfigManager',
  breadcrumb: {
    timestamp: 1745491385299,
    category: 'VideoConfigManager',
    message: 'Updating from KV configuration',
    data: {
      hasDerivatives: true,
      pathPatternCount: 4,
      hasDurationSettings: true
    },
    elapsedMs: 1,
    durationMs: 0
  },
  breadcrumbsCount: 26,
  msg: 'Updating from KV configuration'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigurationManager',
  message: 'Duration settings being updated',
  elapsedMs: '1.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385299,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  hasNewDefaultDuration: true,
  oldDefaultDuration: '5m',
  newDefaultDuration: '5m',
  derivativeChanges: {},
  elapsedMs: 1,
  category: 'VideoConfigurationManager',
  breadcrumb: {
    timestamp: 1745491385299,
    category: 'VideoConfigurationManager',
    message: 'Duration settings being updated',
    data: {
      hasNewDefaultDuration: true,
      oldDefaultDuration: '5m',
      newDefaultDuration: '5m',
      derivativeChanges: {}
    },
    elapsedMs: 1,
    durationMs: 0
  },
  breadcrumbsCount: 27,
  msg: 'Duration settings being updated'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigurationManager',
  message: 'Updated configuration duration settings',
  elapsedMs: '1.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385299,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  defaultDuration: '5m',
  mobileDerivativeDuration: '5m',
  desktopDerivativeDuration: '5m',
  elapsedMs: 1,
  category: 'VideoConfigurationManager',
  breadcrumb: {
    timestamp: 1745491385299,
    category: 'VideoConfigurationManager',
    message: 'Updated configuration duration settings',
    data: {
      defaultDuration: '5m',
      mobileDerivativeDuration: '5m',
      desktopDerivativeDuration: '5m'
    },
    elapsedMs: 1,
    durationMs: 0
  },
  breadcrumbsCount: 28,
  msg: 'Updated configuration duration settings'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoConfigurationManager',
  message: 'Updated path patterns',
  elapsedMs: '1.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385299,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  patternCount: 4,
  patterns: 'videos, popular, shorts, standard',
  elapsedMs: 1,
  category: 'VideoConfigurationManager',
  breadcrumb: {
    timestamp: 1745491385299,
    category: 'VideoConfigurationManager',
    message: 'Updated path patterns',
    data: { patternCount: 4, patterns: 'videos, popular, shorts, standard' },
    elapsedMs: 1,
    durationMs: 0
  },
  breadcrumbsCount: 29,
  msg: 'Updated path patterns'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ConfigurationService',
  message: 'Duration limits already set, not overwriting from config',
  elapsedMs: '1.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CacheRetrievalUtils',
  message: 'No cache match found with any parallel strategy',
  elapsedMs: '10.00',
  durationMs: '9.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Cache miss',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CacheRetrievalUtils',
  message: 'Cache API match result: MISS',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Completed cf-cache-lookup',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'KVCache',
  message: 'KV cache miss',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'CF cache miss',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Completed cache-lookup',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoHandler',
  message: 'Path patterns from config',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoHandler',
  message: 'Path patterns from VideoConfigurationManager',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Configuration',
  message: 'Path patterns for request',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'IMQuery',
  message: 'Using cached derivative mapping',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'IMQuery',
  message: 'Applied derivative configuration for caching',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Client',
  message: 'Matched IMQuery dimensions to derivative',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'IMQuery',
  message: 'Applied derivative based on IMQuery dimensions',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385308,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  requestedWidth: 800,
  requestedHeight: null,
  derivative: 'mobile',
  appliedWidth: 854,
  appliedHeight: 640,
  mappingMethod: 'breakpoint',
  source: 'imquery-derivative',
  elapsedMs: 10,
  category: 'IMQuery',
  breadcrumb: {
    timestamp: 1745491385308,
    category: 'IMQuery',
    message: 'Applied derivative based on IMQuery dimensions',
    data: {
      requestedWidth: 800,
      requestedHeight: null,
      derivative: 'mobile',
      appliedWidth: 854,
      appliedHeight: 640,
      mappingMethod: 'breakpoint',
      source: 'imquery-derivative'
    },
    elapsedMs: 10,
    durationMs: 0
  },
  breadcrumbsCount: 44,
  msg: 'Applied derivative based on IMQuery dimensions'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'IMQuery',
  message: 'Converted IMQuery to client hints',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'IMQuery',
  message: 'Enhanced request with IMQuery client hints',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385308,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  addedHeaders: { Width: '800' },
  elapsedMs: 10,
  category: 'IMQuery',
  breadcrumb: {
    timestamp: 1745491385308,
    category: 'IMQuery',
    message: 'Enhanced request with IMQuery client hints',
    data: { addedHeaders: [Object] },
    elapsedMs: 10,
    durationMs: 0
  },
  breadcrumbsCount: 46,
  msg: 'Enhanced request with IMQuery client hints'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Client',
  message: 'Converted IMQuery to client hints',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Client',
  message: 'Using explicit dimensions',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Transform',
  message: 'Started video-transformation',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoTransformationService',
  message: 'Transforming video',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoTransformationService',
  message: 'Starting video transformation',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Transform',
  message: 'Command initialized',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformVideoCommand',
  message: 'Available path patterns',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformVideoCommand',
  message: 'Pattern test #0',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformVideoCommand',
  message: 'Pattern test #1',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformVideoCommand',
  message: 'Pattern test #2',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformVideoCommand',
  message: 'Pattern test #3',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) [PathUtils] Finding matching path pattern {
  path: '/erfi.mp4',
  patternCount: 4,
  patternNames: [ 'videos', 'popular', 'shorts', 'standard' ]
}
  (debug) [PathUtils] Sorted patterns by priority {
  patternNames: [ 'videos', 'popular', 'shorts', 'standard' ],
  patternPriorities: [ 0, 0, 0, 0 ]
}
  (debug) [PathUtils] Testing pattern #0: videos { matcher: '^/videos/', path: '/erfi.mp4' }
  (debug) [PathUtils] Pattern #0 test result: NO MATCH {
  pattern: 'videos',
  matcher: '^/videos/',
  regexObj: '/^\\/videos\\//',
  path: '/erfi.mp4'
}
  (debug) [PathUtils] Testing pattern #1: popular { matcher: '^/popular/(.*\\.mp4)', path: '/erfi.mp4' }
  (debug) [PathUtils] Pattern #1 test result: NO MATCH {
  pattern: 'popular',
  matcher: '^/popular/(.*\\.mp4)',
  regexObj: '/^\\/popular\\/(.*\\.mp4)/',
  path: '/erfi.mp4'
}
  (debug) [PathUtils] Testing pattern #2: shorts { matcher: '^/shorts/(.*\\.mp4)', path: '/erfi.mp4' }
  (debug) [PathUtils] Pattern #2 test result: NO MATCH {
  pattern: 'shorts',
  matcher: '^/shorts/(.*\\.mp4)',
  regexObj: '/^\\/shorts\\/(.*\\.mp4)/',
  path: '/erfi.mp4'
}
  (debug) [PathUtils] Testing pattern #3: standard {
  matcher: '^/(.*\\.(mp4|webm|mov|avi|mkv|flv|wmv|m4v|3gp|ogv))',
  path: '/erfi.mp4'
}
  (debug) [PathUtils] Pattern #3 test result: MATCH {
  pattern: 'standard',
  matcher: '^/(.*\\.(mp4|webm|mov|avi|mkv|flv|wmv|m4v|3gp|ogv))',
  regexObj: '/^\\/(.*\\.(mp4|webm|mov|avi|mkv|flv|wmv|m4v|3gp|ogv))/',
  path: '/erfi.mp4'
}
  (debug) [PathUtils] Found matching pattern: standard {
  matcher: '^/(.*\\.(mp4|webm|mov|avi|mkv|flv|wmv|m4v|3gp|ogv))',
  path: '/erfi.mp4',
  processPath: true
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformVideoCommand',
  message: 'Computed fallback origin URL',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformVideoCommand',
  message: 'Detecting client capabilities',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'UserAgentUtils',
  message: 'Detecting browser capabilities from User-Agent',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'UserAgentUtils',
  message: 'Browser capabilities detection result',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformVideoCommand',
  message: 'Browser video capabilities',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ClientHints',
  message: 'Client Hints Headers',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ClientHints',
  message: 'Network Quality Metrics',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformVideoCommand',
  message: 'Preparing video transformation',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationService',
  message: 'Starting video transformation preparation',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationService',
  message: 'Processing URL information',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) [PathUtils] Finding matching path pattern {
  path: '/erfi.mp4',
  patternCount: 4,
  patternNames: [ 'videos', 'popular', 'shorts', 'standard' ]
}
  (debug) [PathUtils] Sorted patterns by priority {
  patternNames: [ 'videos', 'popular', 'shorts', 'standard' ],
  patternPriorities: [ 0, 0, 0, 0 ]
}
  (debug) [PathUtils] Testing pattern #0: videos { matcher: '^/videos/', path: '/erfi.mp4' }
  (debug) [PathUtils] Pattern #0 test result: NO MATCH {
  pattern: 'videos',
  matcher: '^/videos/',
  regexObj: '/^\\/videos\\//',
  path: '/erfi.mp4'
}
  (debug) [PathUtils] Testing pattern #1: popular { matcher: '^/popular/(.*\\.mp4)', path: '/erfi.mp4' }
  (debug) [PathUtils] Pattern #1 test result: NO MATCH {
  pattern: 'popular',
  matcher: '^/popular/(.*\\.mp4)',
  regexObj: '/^\\/popular\\/(.*\\.mp4)/',
  path: '/erfi.mp4'
}
  (debug) [PathUtils] Testing pattern #2: shorts { matcher: '^/shorts/(.*\\.mp4)', path: '/erfi.mp4' }
  (debug) [PathUtils] Pattern #2 test result: NO MATCH {
  pattern: 'shorts',
  matcher: '^/shorts/(.*\\.mp4)',
  regexObj: '/^\\/shorts\\/(.*\\.mp4)/',
  path: '/erfi.mp4'
}
  (debug) [PathUtils] Testing pattern #3: standard {
  matcher: '^/(.*\\.(mp4|webm|mov|avi|mkv|flv|wmv|m4v|3gp|ogv))',
  path: '/erfi.mp4'
}
  (debug) [PathUtils] Pattern #3 test result: MATCH {
  pattern: 'standard',
  matcher: '^/(.*\\.(mp4|webm|mov|avi|mkv|flv|wmv|m4v|3gp|ogv))',
  regexObj: '/^\\/(.*\\.(mp4|webm|mov|avi|mkv|flv|wmv|m4v|3gp|ogv))/',
  path: '/erfi.mp4'
}
  (debug) [PathUtils] Found matching pattern: standard {
  matcher: '^/(.*\\.(mp4|webm|mov|avi|mkv|flv|wmv|m4v|3gp|ogv))',
  path: '/erfi.mp4',
  processPath: true
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Transform',
  message: 'Path pattern matching',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'StrategyFactory',
  message: 'Creating transformation strategy for mode: video',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationService',
  message: 'Created transformation strategy',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Transform',
  message: 'Created transformation strategy',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Transform',
  message: 'Options validated successfully',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationService',
  message: 'Strategy updated diagnostics',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoStrategy',
  message: 'Prepared video transformation params',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationService',
  message: 'Prepared transformation parameters',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Transform',
  message: 'Prepared CDN-CGI parameters',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationService',
  message: 'Constructing video URL',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationService',
  message: 'Video URL constructed',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Transform',
  message: 'Constructed origin URL',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) [PathUtils] Building CDN-CGI media URL {
  cdnCgiBasePath: '/cdn-cgi/media',
  transformParams: {
    width: 800,
    height: 640,
    fit: 'contain',
    quality: 'auto',
    duration: '5m',
    compression: 'high',
    audio: true,
    loop: true,
    mode: 'video'
  },
  parameterString: 'width=800,height=640,fit=contain,quality=auto,duration=5m,compression=high,audio=true,loop=true,mode=video',
  originalOriginUrl: 'https://videos.erfi.dev/erfi.mp4?imwidth=800',
  filteredOriginUrl: 'https://videos.erfi.dev/erfi.mp4',
  requestUrl: 'https://cdn.erfi.dev/erfi.mp4?imwidth=800',
  baseUrl: 'https://cdn.erfi.dev',
  transformedUrl: 'https://cdn.erfi.dev/cdn-cgi/media/width=800,height=640,fit=contain,quality=auto,duration=5m,compression=high,audio=true,loop=true,mode=video/https://videos.erfi.dev/erfi.mp4',
  paramCount: 9,
  filteredParams: [ 'imwidth' ],
  retainedParams: [],
  keyParams: {
    width: 800,
    height: 640,
    quality: 'auto',
    mode: 'video',
    fit: 'contain',
    compression: 'high',
    duration: '5m'
  },
  hasDuration: true
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Transform',
  message: 'Transformed URL',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CacheUtils',
  message: 'Matched cache profile: videoFiles',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationService',
  message: 'IMQuery with derivative found - checking cache config',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) [PathUtils] Building CDN-CGI media URL {
  cdnCgiBasePath: '/cdn-cgi/media',
  transformParams: {
    width: 854,
    height: 640,
    fit: 'contain',
    quality: 'auto',
    duration: '5m',
    compression: 'high',
    audio: true,
    loop: true,
    mode: 'video'
  },
  parameterString: 'width=854,height=640,fit=contain,quality=auto,duration=5m,compression=high,audio=true,loop=true,mode=video',
  originalOriginUrl: 'https://videos.erfi.dev/erfi.mp4?imwidth=800',
  filteredOriginUrl: 'https://videos.erfi.dev/erfi.mp4',
  requestUrl: 'https://cdn.erfi.dev/erfi.mp4?imwidth=800',
  baseUrl: 'https://cdn.erfi.dev',
  transformedUrl: 'https://cdn.erfi.dev/cdn-cgi/media/width=854,height=640,fit=contain,quality=auto,duration=5m,compression=high,audio=true,loop=true,mode=video/https://videos.erfi.dev/erfi.mp4',
  paramCount: 9,
  filteredParams: [ 'imwidth' ],
  retainedParams: [],
  keyParams: {
    width: 854,
    height: 640,
    quality: 'auto',
    mode: 'video',
    fit: 'contain',
    compression: 'high',
    duration: '5m'
  },
  hasDuration: true
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationService',
  message: 'Using derivative dimensions instead of requested dimensions',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoStrategy',
  message: 'Preparing transformation params',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385308,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  options: '{"width":800,"height":640,"mode":"video","fit":"contain","audio":true,"format":null,"time":null,"duration":"5m","quality":"auto","compression":"high","loop":true,"preload":null,"autoplay":null,"muted":null,"source":"derivative","derivative":"mobile","customData":{"requestedWidth":800,"requestedHeight":null,"mappedFrom":"imquery"}}',
  derivatives: [ 'desktop', 'tablet', 'mobile' ],
  defaults: {
    width: null,
    height: null,
    mode: 'video',
    fit: null,
    audio: true,
    format: null,
    time: null,
    duration: '5m',
    quality: 'auto',
    compression: 'auto',
    loop: null,
    preload: null,
    autoplay: null,
    muted: null
  },
  elapsedMs: 10,
  category: 'VideoStrategy',
  breadcrumb: {
    timestamp: 1745491385308,
    category: 'VideoStrategy',
    message: 'Preparing transformation params',
    data: {
      options: '{"width":800,"height":640,"mode":"video","fit":"contain","audio":true,"format":null,"time":null,"duration":"5m","quality":"auto","compression":"high","loop":true,"preload":null,"autoplay":null,"muted":null,"source":"derivative","derivative":"mobile","customData":{"requestedWidth":800,"requestedHeight":null,"mappedFrom":"imquery"}}',
      derivatives: [Array],
      defaults: [Object]
    },
    elapsedMs: 10,
    durationMs: 0
  },
  breadcrumbsCount: 84,
  msg: 'Preparing transformation params'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoStrategy',
  message: 'Checking video duration',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385308,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  requestedDuration: '5m',
  maxDuration: 300,
  usingDefault: false,
  configDefaultDuration: '5m',
  elapsedMs: 10,
  category: 'VideoStrategy',
  breadcrumb: {
    timestamp: 1745491385308,
    category: 'VideoStrategy',
    message: 'Checking video duration',
    data: {
      requestedDuration: '5m',
      maxDuration: 300,
      usingDefault: false,
      configDefaultDuration: '5m'
    },
    elapsedMs: 10,
    durationMs: 0
  },
  breadcrumbsCount: 85,
  msg: 'Checking video duration'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationUtils',
  message: 'Adjusting duration',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385308,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  durationStr: '5m',
  haveLimits: true,
  currentLimits: { min: 0, max: 300 },
  configLoaded: true,
  requestedDuration: '5m',
  elapsedMs: 10,
  category: 'TransformationUtils',
  breadcrumb: {
    timestamp: 1745491385308,
    category: 'TransformationUtils',
    message: 'Adjusting duration',
    data: {
      durationStr: '5m',
      haveLimits: true,
      currentLimits: [Object],
      configLoaded: true,
      requestedDuration: '5m'
    },
    elapsedMs: 10,
    durationMs: 0
  },
  breadcrumbsCount: 86,
  msg: 'Adjusting duration'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationUtils',
  message: 'Checking duration against limits',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385308,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  requestedDuration: '5m',
  requestedSeconds: 300,
  minDuration: 0,
  maxDuration: 300,
  shouldAdjustMin: false,
  shouldAdjustMax: false,
  transformationLimits: '{"duration":{"min":0,"max":300},"fileSize":{}}',
  elapsedMs: 10,
  category: 'TransformationUtils',
  breadcrumb: {
    timestamp: 1745491385308,
    category: 'TransformationUtils',
    message: 'Checking duration against limits',
    data: {
      requestedDuration: '5m',
      requestedSeconds: 300,
      minDuration: 0,
      maxDuration: 300,
      shouldAdjustMin: false,
      shouldAdjustMax: false,
      transformationLimits: '{"duration":{"min":0,"max":300},"fileSize":{}}'
    },
    elapsedMs: 10,
    durationMs: 0
  },
  breadcrumbsCount: 87,
  msg: 'Checking duration against limits'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformationUtils',
  message: 'No duration adjustment needed',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoStrategy',
  message: 'Parameter mapping',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoStrategy',
  message: 'Mapping duration parameter',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoStrategy',
  message: 'Final transformation parameters',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385308,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  hasDurationInOptions: true,
  hasDurationInParams: true,
  durationValue: '5m',
  originalDuration: '5m',
  adjustedDuration: '5m',
  allParams: 'width,height,fit,quality,duration,compression,audio,loop,mode',
  elapsedMs: 10,
  category: 'VideoStrategy',
  breadcrumb: {
    timestamp: 1745491385308,
    category: 'VideoStrategy',
    message: 'Final transformation parameters',
    data: {
      hasDurationInOptions: true,
      hasDurationInParams: true,
      durationValue: '5m',
      originalDuration: '5m',
      adjustedDuration: '5m',
      allParams: 'width,height,fit,quality,duration,compression,audio,loop,mode'
    },
    elapsedMs: 10,
    durationMs: 0
  },
  breadcrumbsCount: 91,
  msg: 'Final transformation parameters'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CDN-CGI',
  message: 'Built media transformation URL',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CDN-CGI',
  message: 'Built media transformation URL',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoStrategy',
  message: 'Configuration source details',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (info) {
  time: 1745491385308,
  level: 30,
  requestId: 'e551082e-a377-4267-8ece-e0ab9a606d6e',
  configIsInitialized: true,
  defaultDuration: '5m',
  haveDurationLimits: true,
  minDuration: 0,
  maxDuration: 300,
  elapsedMs: 10,
  category: 'VideoStrategy',
  breadcrumb: {
    timestamp: 1745491385308,
    category: 'VideoStrategy',
    message: 'Configuration source details',
    data: {
      configIsInitialized: true,
      defaultDuration: '5m',
      haveDurationLimits: true,
      minDuration: 0,
      maxDuration: 300
    },
    elapsedMs: 10,
    durationMs: 0
  },
  breadcrumbsCount: 94,
  msg: 'Configuration source details'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Transform',
  message: 'Transformation prepared',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Setting up caching method',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformVideoCommand',
  message: 'Using Cache API for caching',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Transform',
  message: 'Fetching transformed video from CDN-CGI',
  elapsedMs: '10.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformVideoCommand',
  message: 'CDN-CGI proxy response details',
  elapsedMs: '87.00',
  durationMs: '77.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Response',
  message: 'CDN-CGI response received',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformVideoCommand',
  message: 'Applying cache headers',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CacheHeaderUtils',
  message: 'Applying cache headers',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Applied cacheable headers',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoStorageService',
  message: 'Using cache tag prefix from configuration',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoStorageService',
  message: 'Generating cache tags',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoStorageService',
  message: 'Generated cache tags',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Generated cache tags',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'TransformVideoCommand',
  message: 'Building final response',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Response',
  message: 'Applied cache headers',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Response',
  message: 'Processing headers for response',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Response',
  message: 'Building response with enhanced streaming support',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Response',
  message: 'Creating media content response',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoTransformationService',
  message: 'Video transformation successful',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Performance',
  message: 'Video transformation completed',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Transform',
  message: 'Completed video-transformation',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Caching response',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Started cache-storage',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CacheResponseUtils',
  message: 'Starting cache operation',
  elapsedMs: '87.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CacheResponseUtils',
  message: 'Cache miss',
  elapsedMs: '95.00',
  durationMs: '8.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CacheResponseUtils',
  message: 'Created origin request without Range header',
  elapsedMs: '95.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CacheResponseUtils',
  message: 'Storing enhanced response in cache',
  elapsedMs: '95.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CacheResponseUtils',
  message: 'Handling range request for first access',
  elapsedMs: '95.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'CacheResponseUtils',
  message: 'Created manual partial response',
  elapsedMs: '100.00',
  durationMs: '5.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoHandler',
  message: 'Using enhanced response from cache',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoHandler',
  message: 'Skipping KV cache storage (disabled by configuration)',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Completed cache-storage',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Response',
  message: 'Started response-building',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'ResponseBuilder',
  message: 'Building response with debug configuration',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoStorageService',
  message: 'Using cache tag prefix from configuration',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoStorageService',
  message: 'Generating cache tags',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoStorageService',
  message: 'Generated cache tags',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'VideoHandler',
  message: 'Applying cache tags to final response',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Cache',
  message: 'Applied Cache-Tags to final response',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Response',
  message: 'Processing headers for response',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Response',
  message: 'Building response with enhanced streaming support',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Response',
  message: 'Creating 206 Partial Content response',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Response',
  message: 'Completed response-building',
  elapsedMs: '100.00',
  durationMs: '0.00'
}
  (debug) RequestContext: Adding breadcrumb {
  category: 'Request',
  message: 'Completed total-request-processing',
  elapsedMs: '100.00',
  durationMs: '0.00'
}

